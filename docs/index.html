<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.148.2"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>CctoctoFX</title><meta name=description content><meta name=author content="Me"><link rel=canonical href=https://pillumina.github.io/><link crossorigin=anonymous href=/assets/css/stylesheet.9d388901283682bb45dd422fcaa0d0a2054a3c8ff47c9cc6b2baab15508b1b90.css integrity="sha256-nTiJASg2grtF3UIvyqDQogVKPI/0fJzGsrqrFVCLG5A=" rel="preload stylesheet" as=style><link rel=icon href=https://pillumina.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://pillumina.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://pillumina.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://pillumina.github.io/apple-touch-icon.png><link rel=mask-icon href=https://pillumina.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://pillumina.github.io/index.xml><link rel=alternate type=application/json href=https://pillumina.github.io/index.json><link rel=alternate hreflang=en href=https://pillumina.github.io/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js crossorigin=anonymous></script><script>(function(){function t(){return document.querySelector(".post-content")||document.querySelector(".post-single")||document.body}function n(e){return/\$\$[\s\S]+?\$\$|\\\(|\\\)|\\\[|\\\]/.test(e)}function s(e){if(window.__mathjaxLoaded)return;window.__mathjaxLoaded=!0,window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],processEscapes:!0},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code","tt"],ignoreHtmlClass:"no-math"}};var t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js",t.defer=!0,t.onload=function(){window.MathJax&&window.MathJax.typesetPromise&&window.MathJax.typesetPromise([e]).catch(function(e){console.warn("MathJax typeset error",e)})},document.head.appendChild(t)}function e(){try{if(typeof renderMathInElement=="function"){const e=t();renderMathInElement(e,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}],throwOnError:!1,strict:!1,trust:!0,ignoredTags:["script","noscript","style","textarea","pre","code","tt"],ignoredClasses:["no-math"],macros:{"\\boldsymbol":"\\mathbf{#1}","\\bm":"\\mathbf{#1}"}}),setTimeout(function(){n(e.innerHTML)&&s(e)},200)}}catch(e){console.warn("KaTeX render error:",e)}}document.addEventListener("DOMContentLoaded",function(){e(),setTimeout(e,200)}),window.addEventListener("load",function(){setTimeout(e,0)})})()</script><script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><script>const config={startOnLoad:!0,theme:"neutral",themeVariables:{lineColor:"#0f0f0f"},flowchart:{useMaxWidth:!1,htmlLabels:!0}};mermaid.initialize(config),window.onload=()=>{window.mermaid.init(0[0],document.querySelectorAll(".language-mermaid"))}</script><link rel=stylesheet href=/css/custom.min.bda7229c4269a242639e058fb11a4782f02f8d77071ba16609befee67cc41c49.css integrity="sha256-vacinEJpokJjngWPsRpHgvAvjXcHG6FmCb7+5nzEHEk="><script>document.addEventListener("DOMContentLoaded",function(){const t=document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]"),n=document.querySelectorAll(".toc a");if(t.length===0||n.length===0)return;const s={};t.forEach(e=>{s[e.id]=e.offsetTop});function i(){const t=window.scrollY+100;let e="";for(const[n,o]of Object.entries(s))if(t>=o)e=n;else break;return e}function o(){const e=i();if(n.forEach(e=>{e.classList.remove("active")}),e){const t=document.querySelector(`.toc a[href="#${e}"]`);t&&t.classList.add("active")}}let e=!1;window.addEventListener("scroll",function(){e||(window.requestAnimationFrame(function(){o(),e=!1}),e=!0)}),o()})</script><meta property="og:url" content="https://pillumina.github.io/"><meta property="og:site_name" content="CctoctoFX"><meta property="og:title" content="CctoctoFX"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://pillumina.github.io/imgs/icon_head.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://pillumina.github.io/imgs/icon_head.png"><meta name=twitter:title content="CctoctoFX"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"CctoctoFX","url":"https://pillumina.github.io/","description":"","logo":"https://pillumina.github.io/favicon.ico","sameAs":["derios1230@gmail.com","https://github.com/pillumina","https://gitee.com/pillumina"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://pillumina.github.io/ accesskey=h title="CctoctoFX (Alt + H)"><img src=https://pillumina.github.io/apple-touch-icon.png alt aria-label=logo height=30>CctoctoFX</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://pillumina.github.io/archives/ title=Archive><span>Archive</span></a></li><li><a href=https://pillumina.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://pillumina.github.io/posts/aiinfra/ title="AI Infra"><span>AI Infra</span></a></li><li><a href=https://pillumina.github.io/posts/llmtheory/ title=Thoery><span>Thoery</span></a></li><li><a href=https://pillumina.github.io/posts/programming/ title=Programming><span>Programming</span></a></li><li><a href=https://pillumina.github.io/social/ title=Social><span>Social</span></a></li><li><a href=https://pillumina.github.io/open_courses/ title=Study><span>Study</span></a></li></ul></nav></header><main class=main><article class="first-entry home-info"><header class=entry-header><h1>CctoctoFX (Yuxiao Huang)</h1></header><div class=entry-content><div class=row><div class=profile-text><p>Hey there! I‚Äôm a software engineer obsessed with untangling complex systems.<br>My playground includes:</p><ul><li><p>‚öôÔ∏è Software architecture (scaling the unscalable),</p></li><li><p>üß† LLM training/inference (squeezing speed from silicon),</p></li><li><p>üìà Economic systems & üåç geopolitics (decoding money & power).</p></li><li><p>I drop occasional deep dives & spicy takes here‚Äîwhether it‚Äôs CUDA hacks, distributed systems war stories, or how AI reshapes global trade.</p></li><li><p>No fluff, just signal. Join the conversation!</p></li></ul></div><div class=profile-img><img draggable=false src=https://pillumina.github.io/imgs/icon_head.png alt=profile title=profile height=150 width=150></div></div></div></div></div><footer class=entry-footer><div class=social-icons><a href=derios1230@gmail.com target=_blank rel="noopener noreferrer me" title=Email><svg viewBox="0 0 24 21" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
</a><a href=https://github.com/pillumina target=_blank rel="noopener noreferrer me" title=Github><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg>
</a><a href=https://gitee.com/pillumina target=_blank rel="noopener noreferrer me" title=Gitea><svg viewBox="0 0 24 20" fill="currentColor"><path d="M4.209 4.603c-.247.0-.525.02-.84.088-.333.07-1.28.283-2.054 1.027C-.403 7.25.035 9.685.089 10.052c.065.446.263 1.687 1.21 2.768 1.749 2.141 5.513 2.092 5.513 2.092s.462 1.103 1.168 2.119c.955 1.263 1.936 2.248 2.89 2.367 2.406.0 7.212-.004 7.212-.004s.458.004 1.08-.394c.535-.324 1.013-.893 1.013-.893s.492-.527 1.18-1.73c.21-.37.385-.729.538-1.068.0.0 2.107-4.471 2.107-8.823-.042-1.318-.367-1.55-.443-1.627-.156-.156-.366-.153-.366-.153s-4.475.252-6.792.306c-.508.011-1.012.023-1.512.027v4.474l-.634-.301c0-1.39-.004-4.17-.004-4.17-1.107.016-3.405-.084-3.405-.084s-5.399-.27-5.987-.324c-.187-.011-.401-.032-.648-.032zm.354 1.832h.111s.271 2.269.6 3.597C5.549 11.147 6.22 13 6.22 13s-.996-.119-1.641-.348c-.99-.324-1.409-.714-1.409-.714s-.73-.511-1.096-1.52C1.444 8.73 2.021 7.7 2.021 7.7s.32-.859 1.47-1.145c.395-.106.863-.12 1.072-.12zm8.33 2.554c.26.003.509.127.509.127l.868.422-.529 1.075a.686.686.0 00-.614.359.685.685.0 00.072.756l-.939 1.924a.69.69.0 00-.66.527.687.687.0 00.347.763.686.686.0 00.867-.206.688.688.0 00-.069-.882l.916-1.874a.667.667.0 00.237-.02.657.657.0 00.271-.137 8.826 8.826.0 011.016.512.761.761.0 01.286.282c.073.21-.073.569-.073.569-.087.29-.702 1.55-.702 1.55a.692.692.0 00-.676.477.681.681.0 101.157-.252c.073-.141.141-.282.214-.431.19-.397.515-1.16.515-1.16.035-.066.218-.394.103-.814-.095-.435-.48-.638-.48-.638-.467-.301-1.116-.58-1.116-.58s0-.156-.042-.27a.688.688.0 00-.148-.241l.516-1.062 2.89 1.401s.48.218.583.619c.073.282-.019.534-.069.657-.24.587-2.1 4.317-2.1 4.317s-.232.554-.748.588a1.065 1.065.0 01-.393-.045l-.202-.08-4.31-2.1s-.417-.218-.49-.596c-.083-.31.104-.691.104-.691l2.073-4.272s.183-.37.466-.497a.855.855.0 01.35-.077z"/></svg></a></div></footer></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>MoEÁéØÊ∏∏ËÆ∞Ôºö1„ÄÅ‰ªéÂá†‰ΩïÊÑè‰πâÂá∫Âèë</h2></header><div class=entry-content><p>MoEÔºàMixture of ExpertsÔºâÊû∂ÊûÑÁöÑÊµÅË°åËá™‰∏çÂøÖÂ§öËØ¥ÔºåËøëÊù•ÁÅ´Âá∫ÂúàÁöÑDeepSeek-V3‰æøÊòØMoEÊû∂ÊûÑÔºå‰º†Ë®ÄGPT-5‰πüÊòØMoEÊû∂ÊûÑÔºåÂõΩÂÜÖÊúÄËøëÂá∫ÁöÑ‰∏Ä‰∫õÊ®°ÂûãÔºàQwen3Á≥ªÂàóÁõ∏ÂÖ≥Ôºâ‰πüÊúâ‰∏çÂ∞ëÁî®‰∏ä‰∫ÜMoE„ÄÇÁÑ∂ËÄåÔºåËôΩÁÑ∂MoEÁöÑÁ†îÁ©∂Áî±Êù•Â∑≤‰πÖÔºå‰ΩÜÂÖ∂Â∫îÁî®ÈïøÊó∂Èó¥ÂÜÖÈÉΩ‰∏çÊÑ†‰∏çÁÅ´ÔºåÂ§ßËá¥‰∏äÊòØ‰ªéÂéªÂπ¥ÂàùÁöÑ„ÄäMixtral of Experts„ÄãÂºÄÂßãÔºåMoEÊâçÈÄêÊ∏êÂê∏ÂºïÂ§ßÂÆ∂ÁöÑÊ≥®ÊÑèÂäõÔºåÂÖ∂ÊòæËëó‰ºòÁÇπÊòØÂèÇÊï∞ÈáèÂ§ßÔºå‰ΩÜËÆ≠ÁªÉÂíåÊé®ÁêÜÊàêÊú¨ÈÉΩÊòæËëó‰Ωé„ÄÇ
‰ΩÜÂêåÊó∂MoE‰πüÊúâ‰∏Ä‰∫õÈöæÈ¢òÔºåÂ¶ÇËÆ≠ÁªÉ‰∏çÁ®≥ÂÆö„ÄÅË¥üËΩΩ‰∏çÂùáË°°„ÄÅÊïàÊûú‰∏çÂ§üÂ•ΩÁ≠âÔºåËøô‰πüÊòØÂÆÉÊó©Âπ¥Ê≤°ÊúâÊµÅË°åËµ∑Êù•ÁöÑ‰∏ªË¶ÅÂéüÂõ†„ÄÇ‰∏çËøáÈöèÁùÄËøô‰∏§Âπ¥ÂÖ≥Ê≥®Â∫¶ÁöÑÊèêÂçáÔºåËøô‰∫õÈóÆÈ¢òÂú®ÂæàÂ§ßÁ®ãÂ∫¶‰∏äÂ∑≤ÁªèÂæóÂà∞Ëß£ÂÜ≥ÔºåÊàë‰ª¨Âú®Êé•‰∏ãÊù•ÁöÑ‰ªãÁªç‰∏≠‰ºöÈÄê‰∏ÄË∞àÂà∞Ëøô‰∫õÂÜÖÂÆπ„ÄÇ
ÈóÆÈ¢òÂÆö‰πâ Êàë‰ª¨Áü•ÈÅìÔºåTransformerÊ®°ÂûãÁî±AttentionÂ±ÇÂíåMLPÂ±ÇÁªÑÊàêÔºåMoEÊõøÊç¢ÁöÑÊòØÊ®°Âûã‰∏≠MLPÂ±Ç„ÄÇMLPÂ±ÇÂèàÂàÜFFNÔºàFeedForward NetworkÔºâÂíåGLUÔºàGated Linear UnitÔºâ‰∏§ÁßçÔºå‰∏ªÊµÅÁöÑÊòØGLUÔºå‰ΩÜÁÆÄÂçïËµ∑ËßÅÊàë‰ª¨ËøòÊòØ‰ª•FFN‰∏∫‰æãÔºö$$y=f(xW^{(A)})W^{(B)}$$ÂÖ∂‰∏≠$x\in\mathbb{R}^d$ ÊòØËæìÂÖ•ÂêëÈáèÔºàË°åÂêëÈáèÔºâÔºå$W^{(A)}\in\mathbb{R}^{d\times{D}}$, $W^{(B)}\in\mathbb{R}^{D\times{d}}$ ÊòØ‰∏§‰∏™ÂèÇÊï∞Áü©ÈòµÔºå$f$ÊòØElement-wiseÁöÑÊøÄÊ¥ªÂáΩÊï∞ÔºåËÆæ$n$ÊòØ‰∏Ä‰∏™ËÉΩÊï¥Èô§$D$ÁöÑÊï¥Êï∞ÔºåÈÇ£‰πà‰∏äÈù¢ÁöÑFFNÂèØ‰ª•Áî®ÂàÜÂùóÁü©ÈòµÁ≠â‰ª∑Ôºö
$$ \begin{equation}\boldsymbol{y} = f\big(\boldsymbol{x}\begin{bmatrix}\boldsymbol{W}^{(A)}_1 & \boldsymbol{W}^{(A)}_2 & \cdots & \boldsymbol{W}^{(A)}_n\end{bmatrix}\big)\begin{bmatrix}\boldsymbol{W}^{(B)}_1 \\ \boldsymbol{W}^{(B)}_2 \\ \vdots \\ \boldsymbol{W}^{(B)}_n\end{bmatrix} = \sum_{i=1}^n \underbrace{f(\boldsymbol{x}\boldsymbol{W}^{(A)}_i)\boldsymbol{W}^{(B)}_i}_{\boldsymbol{v}_i}\end{equation} $$ ÂÖ∂‰∏≠
$W^{(A)}_i = W^{(A)}_{[:,(i-1)c:ic]}$, $W^{(B)}_i = W^{(B)}_{[(i-1)c:ic,:]}$, $c= D/n$ÔºåËøôÈáåÁöÑÂàáÁâáÊåâÁÖßPythonËßÑÂàôÊù•„ÄÇÁî±Ê≠§ÂèØËßÅÔºåFFNÂèØ‰ª•Á≠â‰ª∑Ë°®Á§∫Êàên‰∏™ÂêëÈáè
$\boldsymbol{v}_1,\boldsymbol{v}_2,\cdots,\boldsymbol{v}_n$
‰πãÂíåÔºåÊØè‰∏™ÂêëÈáè‰ª£Ë°®‰∫Ü‰∏Ä‰∏™Â∞èÊ®°Âûã$f(\boldsymbol{x}\boldsymbol{W}^{(A)}_i)\boldsymbol{W}^{(B)}_i$ÁöÑËæìÂá∫ÔºåÊØè‰∏™Â∞èÊ®°ÂûãËÆ°ÁÆóÈáèÁõ∏ÂêåÔºåËøô‰∫õÂ∞èÊ®°ÂûãÂ∞±ÊòØMoE‰∏≠ÁöÑ‚ÄúExpert‚Äù„ÄÇ
MoEÊèêÂá∫ÁöÑÈóÆÈ¢òÊòØÔºö
ËÉΩÂê¶Âè™Êåëk‰∏™ÂêëÈáèÁöÑÂíåÊù•ÈÄºËøën‰∏™ÂêëÈáèÁöÑÂíåÂë¢ÔºüËøôÊ†∑Â∞±ÂèØ‰ª•Â∞ÜËÆ°ÁÆóÈáèÈôç‰ΩéÂà∞k/n‰∫Ü„ÄÇ
Ê®°ÈïøÊéíÂ∫è Ë¶ÅËß£ÂÜ≥‰∏äËø∞ÁöÑÈóÆÈ¢òÔºåÂÆûË¥®‰∏äÊòØË¶ÅËß£ÂÜ≥‰ΩéÁß©Ëøë‰ººÁöÑÈóÆÈ¢òÔºåÊï∞Â≠¶ÂÖ¨ÂºèÂ∞±ÊòØ:
$$\begin{equation}\mathop{\text{argmin}}_{\lambda_1,\lambda_2,\cdots,\lambda_n\in\{0,1\}}\left\Vert\sum_{i=1}^n \lambda_i \boldsymbol{v}_i - \sum_{i=1}^n\boldsymbol{v}_i\right\Vert^2\quad\text{s.t.}\quad \sum_{i=1}^n \lambda_i = k\end{equation}$$ ËÆ∞$\gamma_i = 1 - \lambda_i$ÔºåÈÇ£‰πàÂÆÉÂèàÂèØ‰ª•ÂÜôÊàêÔºö
$$\begin{equation}\mathop{\text{argmin}}_{\gamma_1,\gamma_2,\cdots,\gamma_n\in\{0,1\}}\left\Vert\sum_{i=1}^n \gamma_i \boldsymbol{v}_i\right\Vert^2\quad\text{s.t.}\quad \sum_{i=1}^n \gamma_i = n - k\end{equation}$$ Ëøô‰∏™ÈóÆÈ¢òÁöÑÁ≤æÁ°ÆÊ±ÇËß£ÊòØÊØîËæÉÂõ∞ÈöæÁöÑÔºàNP HardÔºâÔºå‰ΩÜÊúâ‰∏Ä‰∏™ÁÆÄÂçïÁöÑËøë‰ººËß£ÔºöÂΩì$v_i$‰∏§‰∏§Ê≠£‰∫§Êó∂ÔºåÊàë‰ª¨Êúâ
$$\begin{equation}\left\Vert\sum_{i=1}^n \gamma_i \boldsymbol{v}_i\right\Vert^2 = \sum_{i=1}^n \gamma_i^2 \Vert\boldsymbol{v}_i\Vert^2 = \sum_{i=1}^n \gamma_i \Vert\boldsymbol{v}_i\Vert^2\end{equation}$$ ‰∏äÂºèÊúÄ‰ºòËß£ÊòæÁÑ∂Â∞±ÊòØËÆ©Ê®°Èïø$\Vert\boldsymbol{v}_i\Vert$ÊúÄÂ∞èÁöÑ$n-k$‰∏™$\gamma_i$Á≠â‰∫é1ÔºåËøôÂèàÁ≠â‰ª∑‰∫éËØ¥ÊåëÂá∫Ê®°ÈïøÊúÄÂ§ßÁöÑ$k$‰∏™ÂêëÈáèÊù•ÈÄºËøë$n$‰∏™ÂêëÈáè‰πãÂíå„ÄÇÂΩì$v_i$‰∏çÊª°Ë∂≥‰∏§‰∏§Ê≠£‰∫§ÁöÑÊù°‰ª∂Êó∂ÔºåÊàë‰ª¨‰æùÁÑ∂Áî®ÂÆÉÊù•‰Ωú‰∏∫‰∏Ä‰∏™Ëøë‰ººËß£„ÄÇÂÆÉÁöÑÂá†‰ΩïÊÑè‰πâ‰πüÂæàÁõ¥ËßÇÔºåÊ®°ÈïøË∂äÂ§ßÁöÑÂêëÈáèÔºåÂú®Ê±ÇÂíåËøáÁ®ã‰∏≠Ë∂ä‰∏çÂÆπÊòìË¢´ÊäµÊ∂àÔºå‰ªéËÄå‰ΩúÁî®Ë∂äÁ™ÅÂá∫„ÄÇ
...</p></div><footer class=entry-footer><span title='2025-08-08 15:05:12 +0800 CST'>August 8, 2025</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;146 words&nbsp;¬∑&nbsp;Me</footer><a class=entry-link aria-label="post link to MoEÁéØÊ∏∏ËÆ∞Ôºö1„ÄÅ‰ªéÂá†‰ΩïÊÑè‰πâÂá∫Âèë" href=https://pillumina.github.io/posts/llmtheory/1-moe/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>[LLM4RL] ÂºÇÊ≠•RLÊ°ÜÊû∂: Slime</h2></header><div class=entry-content><p>https://github.com/THUDM/slime
‰∏Ä‰∏™ÂºÇÊ≠•ÂÆûÁé∞‰ΩÜÊòØÈùûÂÆåÂÖ®ÂºÇÊ≠•ÁöÑRLÊ°ÜÊû∂
ÊÄª‰ΩìÊû∂ÊûÑ ‰ªéÊ∫êÁ†ÅÊ®°ÂùóÂàíÂàÜÔºåÊúâ‰∏âÂ§ßÊ†∏ÂøÉÊ®°ÂùóÔºö trainingÔºàMegatronÔºâÔºö‰∏ªËÆ≠ÁªÉÊµÅÁ®ãÔºåË¥üË¥£Ê®°ÂûãÂèÇÊï∞Êõ¥Êñ∞„ÄÇ rolloutÔºàSGLang + routerÔºâÔºöË¥üË¥£ÈááÊ†∑„ÄÅÂ•ñÂä±/È™åËØÅÁîüÊàêÔºå‰∫ßÁîüËÆ≠ÁªÉÊï∞ÊçÆ„ÄÇ data bufferÔºöÊ°•Êé•ËÆ≠ÁªÉ‰∏éÈááÊ†∑ÔºåÁÆ°ÁêÜÊï∞ÊçÆÊµÅ„ÄÅÁºìÂ≠ò‰∏éÁîüÊàêÊñπÂºè„ÄÇ ÂàÜÂ∏ÉÂºèË∞ÉÂ∫¶ÔºöÂÖ≥‰∫éËµÑÊ∫êÂàÜÈÖç„ÄÅactorÂêØÂä®„ÄÅ‰ªªÂä°Ë∞ÉÂ∫¶ÈÉΩÁî±‰∫éRayÁÆ°ÁêÜÔºåÊîØÊåÅÂºÇÊ≠•ËÆ≠ÁªÉÂíåÈááÊ†∑ Êèí‰ª∂Êú∫Âà∂ÔºöÊîØÊåÅËá™ÂÆö‰πâbuffer„ÄÅÊ®°Âûã„ÄÅÊ®°ÂûãÊ†ºÂºèËΩ¨Êç¢ÔºàmbridgeÔºâ flowchart LR subgraph Ray[Ray ÂàÜÂ∏ÉÂºèË∞ÉÂ∫¶] A1[Actor Group&lt;br>ËÆ≠ÁªÉ Actor] A2[Rollout Group&lt;br>ÈááÊ†∑/ÁîüÊàê Actor] A3[Placement Group&lt;br>ËµÑÊ∫êÂàÜÈÖç] end subgraph Training[Training &lt;Megatron>] T1[Ê®°ÂûãËÆ≠ÁªÉ] T2[ÊùÉÈáçÂêåÊ≠•] T3[ËØÑ‰º∞/‰øùÂ≠ò] end subgraph Rollout[Rollout &lt;SGLang+Router>] R1[ÈááÊ†∑/ÁîüÊàê] R2[Â•ñÂä±Ê®°Âûã] R3[ËøáÊª§Âô®] end subgraph Buffer[Data Buffer] B1[Êï∞ÊçÆÁºìÂ≠ò] B2[Êï∞ÊçÆÊµÅËΩ¨] B3[Offload/Onload] end subgraph Plugins[Êèí‰ª∂Êú∫Âà∂] P1[Buffer Êèí‰ª∂] P2[Model Êèí‰ª∂] P3[mbridge Ê†ºÂºèËΩ¨Êç¢] end A1-->|ËÆ≠ÁªÉÊï∞ÊçÆ|B1 A2-->|ÁîüÊàêÊï∞ÊçÆ|B1 B1-->|Êï∞ÊçÆÊµÅ|A1 B1-->|Êï∞ÊçÆÊµÅ|A2 A1-->|ÊùÉÈáçÂêåÊ≠•|A2 A1-->|ËØÑ‰º∞/‰øùÂ≠ò|T3 A2-->|ÈááÊ†∑/Â•ñÂä±/ËøáÊª§|R1 R1-->|Â•ñÂä±|R2 R1-->|ËøáÊª§|R3 B1-->|Êèí‰ª∂Êâ©Â±ï|P1 A1-->|Ê®°ÂûãÊâ©Â±ï|P2 A1-->|Ê†ºÂºèËΩ¨Êç¢|P3 A3-->|ËµÑÊ∫êÂàÜÈÖç|A1 A3-->|ËµÑÊ∫êÂàÜÈÖç|A2 ÂêÑÊ®°ÂùóËßÜËßíÁöÑÂÖ≥Á≥ªÂõæ slime/rollout ÁªÑ‰ª∂Âõæ rollout Ë¥üË¥£ÈááÊ†∑„ÄÅÂ•ñÂä±„ÄÅËøáÊª§ÔºåÊîØÊåÅÂ§öÁßçÈááÊ†∑/Â•ñÂä±/ËøáÊª§Á≠ñÁï•„ÄÇ
...</p></div><footer class=entry-footer><span title='2025-08-07 17:10:12 +0800 CST'>August 7, 2025</span>&nbsp;¬∑&nbsp;15 min&nbsp;¬∑&nbsp;3119 words&nbsp;¬∑&nbsp;Me</footer><a class=entry-link aria-label="post link to [LLM4RL] ÂºÇÊ≠•RLÊ°ÜÊû∂: Slime" href=https://pillumina.github.io/posts/aiinfra/02-slime/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>[LLM4RL] ÂºÇÊ≠•RLÊ°ÜÊû∂: Areal</h2></header><div class=entry-content><p>https://github.com/inclusionAI/AReaL
Á∫ØÂºÇÊ≠•RLÊñπÊ°à
ÂºÇÊ≠•PPOËÆ≠ÁªÉË∞ÉÁî®ÊµÅÁ®ã graph TD A[Áî®Êà∑ÊâßË°å: examples/run_async_ppo.sh] --> B[training/main_async_ppo.py] B --> C[AsyncPPOMATHConfigÈÖçÁΩÆËß£Êûê] C --> D[training/utils.py: run_experiment] D --> E[RayÂàùÂßãÂåñ] E --> F[exp_cfg.initial_setup] F --> G[AsyncRLExperimentConfig.initial_setup] G --> H[ÂàõÂª∫ExperimentConfig] H --> I[ÂêØÂä®Workers] I --> J[MasterWorker] I --> K[ModelWorker] I --> L[GenerationServer] I --> M[GserverManager] I --> N[RolloutWorker] %% MasterWorkerËÆ≠ÁªÉÊµÅÁ®ã J --> J1[MasterWorker._poll_async] J1 --> J2[FunctionExecutor.execute_step] J2 --> J3[ÊâßË°åÊï∞ÊçÆÊµÅÂõæÈÅçÂéÜ] J3 --> J4[ÂèëÈÄÅËÆ≠ÁªÉËØ∑Ê±ÇÂà∞ModelWorker] %% ModelWorkerÂ§ÑÁêÜÊµÅÁ®ã K --> K1[ModelWorker._poll] K1 --> K2[Êé•Êî∂MasterWorkerËØ∑Ê±Ç] K2 --> K3[Â§ÑÁêÜËÆ≠ÁªÉ/Êé®ÁêÜËØ∑Ê±Ç] K3 --> K4[ÊâßË°åÊ®°ÂûãÂâçÂêë/ÂèçÂêë‰º†Êí≠] %% RolloutÊµÅÁ®ã N --> N1[RolloutWorker._poll_async] N1 --> N2[load_next_data] N2 --> N3[allocate_new_rollout] N3 --> N4[agent.collect_trajectory] N4 --> N5[env.stepËÆ°ÁÆóÂ•ñÂä±] N5 --> N6[Êé®ÈÄÅÊï∞ÊçÆÂà∞ËÆ≠ÁªÉÁ´Ø] %% ÁîüÊàêÊúçÂä°Âô®ÊµÅÁ®ã L --> L1[GenerationServer._poll] L1 --> L2[ÂêØÂä®SGLangÂ≠êËøõÁ®ã] L2 --> L3[Â§ÑÁêÜÁîüÊàêËØ∑Ê±Ç] %% ÁîüÊàêÊúçÂä°Âô®ÁÆ°ÁêÜÂô® M --> M1[GserverManager._poll] M1 --> M2[HTTPÊúçÂä°Á∫øÁ®ã] M2 --> M3[ËØ∑Ê±ÇË∞ÉÂ∫¶ÂíåÊùÉÈáçÊõ¥Êñ∞] %% Êï∞ÊçÆÊµÅ N6 --> O[stream_dataset.py] O --> J4 %% ÂºÇÊ≠•ÈÄö‰ø° J4 -.->|ÂºÇÊ≠•ËØ∑Ê±Ç| K2 N3 -.->|HTTPËØ∑Ê±Ç| M2 M2 -.->|Ë∞ÉÂ∫¶ËØ∑Ê±Ç| L3 %% ÊùÉÈáçÊõ¥Êñ∞ K4 --> P[ÂèÇÊï∞Êõ¥Êñ∞] P --> Q[ÊùÉÈáçÂêåÊ≠•] Q --> M3 M3 --> R[Êõ¥Êñ∞ÁîüÊàêÊúçÂä°Âô®ÊùÉÈáç] style A fill:#e1f5fe style J fill:#f3e5f5 style K fill:#e8f5e8 style L fill:#fff3e0 style M fill:#fce4ec style N fill:#f1f8e9 Áî®Êà∑ÂÖ•Âè£Âà∞ÈÖçÁΩÆËß£Êûê examples/run_async_ppo.sh¬†‚Üí¬†training/main_async_ppo.py
...</p></div><footer class=entry-footer><span title='2025-08-07 14:40:12 +0800 CST'>August 7, 2025</span>&nbsp;¬∑&nbsp;23 min&nbsp;¬∑&nbsp;4872 words&nbsp;¬∑&nbsp;Me</footer><a class=entry-link aria-label="post link to [LLM4RL] ÂºÇÊ≠•RLÊ°ÜÊû∂: Areal" href=https://pillumina.github.io/posts/aiinfra/03-areal/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ÊòáËÖæË∂ÖËäÇÁÇπCloudMatrix384ËÆ∫ÊñáÊãÜËß£</h2></header><div class=entry-content><p>6.19ÂèëÂ∏ÉÁöÑCloudMatrix384ËÆ∫ÊñáÊãÜËß£Ôºå‰ªéÂÆèËßÇÂà∞Âü∫Á°ÄÊ¶ÇÂøµ
Ê†∏ÂøÉÊåáÊ†áÂíåËÆ°ÁÆóÊñπÂºè TPOT (Time Per Output Token) ÂÖ¨ÂºèÔºö¬†$$TPOT= \frac{DecodeÊÄªËÄóÊó∂}{ÁîüÊàêTokenÊï∞Èáè}$$ ÊµãÈáèÊñπÂºèÔºö¬†‰ªéÁ¨¨‰∏Ä‰∏™ËæìÂá∫TokenÂºÄÂßãËÆ°Êó∂ÔºåÂà∞ÁîüÊàêÁªìÊùüÔºàÂê´MoEÈÄö‰ø°/KVËØªÂèñÔºâ ‰∏∫‰ªÄ‰πàÈáçË¶ÅÔºö¬†Áõ¥Êé•ÂÜ≥ÂÆöÁî®Êà∑‰ΩìÈ™åÔºàÂ¶ÇChatbotÂìçÂ∫îÈÄüÂ∫¶ÔºâÔºåËÆ∫ÊñáË¶ÅÊ±Ç¬†&lt;50msÔºà‰∏•Ê†ºÊ®°Âºè&lt;15msÔºâ Ê∑±Â±ÇÊÑè‰πâÔºö¬†ÂèçÊò†Á≥ªÁªüÈÄö‰ø°+ËÆ°ÁÆóÁªºÂêàËÉΩÂäõÔºåEP320‰∏ãTPOT=42msËØÅÊòéUBÁΩëÁªúÁ™ÅÁ†¥MoEÈÄö‰ø°Â¢ô ËÆ°ÁÆóÊïàÁéá (Tokens/s per TFLOPS) ÂÖ¨ÂºèÔºö¬†$$ËÆ°ÁÆóÊïàÁéá=\frac {ÂêûÂêêÈáè(tokens/s)} {NPUÂ≥∞ÂÄºÁÆóÂäõ(TFLOPS)}$$‚Äã ËÆ∫ÊñáÊï∞ÊçÆÔºö Èò∂ÊÆµ ÂÄº ÂØπÊØîÂü∫ÂáÜ Prefill 4.45 Ë∂ÖNVIDIA H100+SGLang(3.8) Decode 1.29 Ë∂ÖNVIDIA H800+DeepSeek(0.9) ‰∏∫‰ªÄ‰πàÈáçË¶ÅÔºö¬†Êè≠Á§∫Á°¨‰ª∂Âà©Áî®ÁéáÔºå1.0‰ª•‰∏äË°®ÊòéËΩØÁ°¨‰ª∂ÂçèÂêåÊûÅËá¥‰ºòÂåñ Ê∑±Â±ÇÊÑè‰πâÔºö¬†DecodeÈò∂ÊÆµ1.29 ‚Üí ÊòáËÖæ910ÁöÑCubeÂºïÊìéÂà©Áî®ÁéáËææ¬†86%Ôºà‰º†ÁªüGPU‰ªÖ60%) ÁºìÂ≠òËÆøÈóÆÂª∂Ëøü (KV Cache Access Latency) ÂÖ¨ÂºèÔºö¬†$$Âª∂Ëøü=TMMU_{Êü•ËØ¢}+TUB_{‰º†Ëæì}+TDRAM_{ËØªÂèñ}‚Äã$$ ËÆ∫ÊñáÊï∞ÊçÆÔºö Âú∫ÊôØ Âª∂Ëøü ÂØπÊØî‰º†Áªü Êú¨Âú∞HBMÂëΩ‰∏≠ 0.2Œºs - ËøúÁ®ãDRAMËÆøÈóÆ(UB) 1.5Œºs >10Œºs (PCIe+IB) ‰∏∫‰ªÄ‰πàÈáçË¶ÅÔºö¬†Èïø‰∏ä‰∏ãÊñáÊé®ÁêÜ‰∏≠70%Êó∂Èó¥Ëä±Âú®KVÁºìÂ≠òËÆøÈóÆ Ê∑±Â±ÇÊÑè‰πâÔºö¬†UBÁªü‰∏ÄÂÜÖÂ≠òÂ∞ÜËøúÁ®ãËÆøÈóÆÊÄßËÉΩÊèêÂçáËá≥ËøëÊú¨Âú∞Ê∞¥Âπ≥ÔºåÊîØÊíëÁôæ‰∏áToken‰∏ä‰∏ãÊñá„ÄÇ ‰∏ìÂÆ∂Âπ∂Ë°åÊâ©Â±ïÊÄß (EP Degree) ÂÆö‰πâÔºöÂçï‰∏™MoEÂ±ÇÂèØÂàÜÂ∏ÉÁöÑ‰∏ìÂÆ∂Êï∞Èáè ËÆ∫ÊñáÁ™ÅÁ†¥ÔºöEP320ÔºàÊØè‰∏™ÊòáËÖæDieÊâòÁÆ°1‰∏™‰∏ìÂÆ∂Ôºâ ÊîØÊíëÂÖ¨ÂºèÔºö¬†$$ÂèØÊâ©Â±ïÊÄß=\frac {UBÊÄªÂ∏¶ÂÆΩ}{Âçï‰∏™‰∏ìÂÆ∂ÈÄö‰ø°ÈúÄÊ±Ç}$$¬†$$EPmax=\frac {384√ó392GB/s} {8B/token√ó10^6token/s}=320$$ ‰∏∫‰ªÄ‰πàÈáçË¶ÅÔºö¬†EP>100Êó∂‰º†ÁªüÁΩëÁªúÂ¥©Ê∫ÉÔºåEP320ËØÅÊòéUBÁ™ÅÁ†¥ÈÄö‰ø°ÂèØÊâ©Â±ïÊÄßÊûÅÈôê INT8ÈáèÂåñÊî∂Áõä ÂÖ¨ÂºèÔºö$$¬†Âä†ÈÄüÊØî=\frac {FP16ÂêûÂêê}{INT8ÂêûÂêê}√óÁ≤æÂ∫¶‰øùÊåÅÁéá$$ ËÆ∫ÊñáÊï∞ÊçÆÔºö ÂêûÂêêÊèêÂçáÔºö1.8ÂÄç Á≤æÂ∫¶ÊçüÂ§±Ôºö&lt;0.5%Ôºà16‰∏™Âü∫ÂáÜÊµãËØïÔºâ ‰∏∫‰ªÄ‰πàÈáçË¶ÅÔºö¬†DecodeÈò∂ÊÆµÂÜÖÂ≠òÂ∏¶ÂÆΩÂáèÂ∞ë50%ÔºåËß£ÂÜ≥NPUÁöÑ‚ÄúÂÜÖÂ≠òÂ¢ô‚ÄùÈóÆÈ¢ò QAËæÖÂä©ÁêÜËß£ ‰∏∫‰ªÄ‰πàÁî®TPOTËÄåÈùûQPSÔºü TPOTÂâ•Á¶ªBatch SizeÂΩ±ÂìçÔºåÁ∫ØÁ≤πË°°ÈáèÂçïÊ¨°ÁîüÊàêÊïàÁéá Êõ¥Áõ¥ËßÇÂèçÊò†SLAÔºàÁî®Êà∑ÊÑüÁü•ÁöÑÂª∂ËøüÔºâ ‰∏∫‰ªÄ‰πàÂº∫Ë∞ÉËÆ°ÁÆóÊïàÁéáËÄåÈùûÁªùÂØπÂêûÂêêÔºü ÊéíÈô§Â∑•Ëâ∫‰ºòÂäøÔºà7nm vs 5nmÔºâÔºåËÅöÁÑ¶Êû∂ÊûÑÂàõÊñ∞‰ª∑ÂÄº 1.29 tokens/s/TFLOPS ‚Üí ËØÅÊòéUB+LEPËÆæËÆ°‰ºò‰∫éNVLink+GPU ‰∏∫‰ªÄ‰πàÊµãÈáèËøúÁ®ãDRAMËÆøÈóÆÂª∂ËøüÔºü È™åËØÅÂÜÖÂ≠òÊ±†ÂåñÁöÑÂÆûÈôÖÊïàÊûúÔºåËøôÊòØÊâìÁ†¥‚ÄúÂÜÖÂ≠òÂ¢ô‚ÄùÁöÑÊ†∏ÂøÉ 1.5ŒºsÂª∂Ëøü ‚Üí ÂÆûÁé∞‚ÄúÂÖ®ÈõÜÁæ§Â¶ÇÂçïÊú∫‚ÄùÁöÑÁ°¨‰ª∂Âü∫Á°Ä Ë∂ÖËäÇÁÇπÊû∂ÊûÑ ‰∏âÁ∫ßÁΩëÁªúÂπ≥Èù¢ÁöÑÁâ©ÁêÜÈöîÁ¶ª Á°¨‰ª∂ÈöîÁ¶ªÂéüÁêÜ
...</p></div><footer class=entry-footer><span title='2025-08-07 10:40:12 +0800 CST'>August 7, 2025</span>&nbsp;¬∑&nbsp;6 min&nbsp;¬∑&nbsp;1211 words&nbsp;¬∑&nbsp;Me</footer><a class=entry-link aria-label="post link to ÊòáËÖæË∂ÖËäÇÁÇπCloudMatrix384ËÆ∫ÊñáÊãÜËß£" href=https://pillumina.github.io/posts/aiinfra/01-ascend-cloudmatrix/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>LaTeX Test Page</h2></header><div class=entry-content><p>LaTeX Ê∏≤ÊüìÊµãËØï Âü∫Á°ÄÊµãËØï Ë°åÂÜÖÂÖ¨ÂºèÔºö$E = mc^2$
ÂùóÁ∫ßÂÖ¨ÂºèÔºö
$$E = mc^2$$
Â§çÊùÇÂÖ¨ÂºèÊµãËØï ÂéüÂßãÈóÆÈ¢òÂÖ¨Âºè1ÔºàÊõ¥Á®≥Â¶•ÂÜôÊ≥ïÔºåÊãÜÊàê‰∏§Êù°ÊòæÁ§∫ÂÖ¨ÂºèÔºâ $$ \mathbf{y} = f\left(\mathbf{x}\, \big[\,\mathbf{W}^{(A)}_1\; \mathbf{W}^{(A)}_2\; \cdots\; \mathbf{W}^{(A)}_n\,\big]\right) \begin{bmatrix} \mathbf{W}^{(B)}_1 \\ \mathbf{W}^{(B)}_2 \\ \vdots \\ \mathbf{W}^{(B)}_n \end{bmatrix} $$ $$ \mathbf{y} = \sum_{i=1}^n f\big(\mathbf{x}\mathbf{W}^{(A)}_i\big)\,\mathbf{W}^{(B)}_i $$ ÂÖ∂‰ªñÂ∏∏ËßÅLaTeXÊµãËØï ÂàÜÊï∞ÂíåÊ†πÂè∑Ôºö $$\frac{\sqrt{x^2 + y^2}}{2}$$
ÁßØÂàÜÔºö $$\int_{-\infty}^{\infty} e^{-x^2} dx = \sqrt{\pi}$$
Áü©ÈòµÔºàÁ°Æ‰øùÊØèË°å‰ΩøÁî® \ Êç¢Ë°åÔºâÔºö $$ \begin{pmatrix} a & b \\ c & d \end{pmatrix} \begin{bmatrix} x \\ y \end{bmatrix} = \begin{bmatrix} ax + by \\ cx + dy \end{bmatrix} $$ Ê±ÇÂíåÂíå‰πòÁßØÔºö $$\sum_{i=1}^n i = \frac{n(n+1)}{2}$$
...</p></div><footer class=entry-footer><span title='2024-01-01 00:00:00 +0000 UTC'>January 1, 2024</span>&nbsp;¬∑&nbsp;1 min&nbsp;¬∑&nbsp;105 words&nbsp;¬∑&nbsp;Me</footer><a class=entry-link aria-label="post link to LaTeX Test Page" href=https://pillumina.github.io/posts/llmtheory/latex-test/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://pillumina.github.io/page/2/>Next&nbsp;2/8&nbsp;¬ª</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://pillumina.github.io/>CctoctoFX</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg></a><div class=reading-progress-bar></div><script src=https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".reading-progress-bar");if(!t)return;const n=document.querySelector(".post-single");if(!n)return;function s(){const e=n.getBoundingClientRect(),s=e.height,o=window.innerHeight,i=window.scrollY||window.pageYOffset,a=i/(s-o)*100;t.style.width=`${Math.min(100,Math.max(0,a))}%`}let e=!1;window.addEventListener("scroll",function(){e||(window.requestAnimationFrame(function(){s(),e=!1}),e=!0)}),s()}),document.addEventListener("DOMContentLoaded",function(){mediumZoom("article img:not(.nozoom)",{margin:24,background:"var(--theme)",scrollOffset:0})})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>